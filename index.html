<!DOCTYPE html>
<html lang="fr"> 
  <head> 
    <meta charset="UTF-8"> 
    <title>Calendrier des Sardanes-test</title> 
    <style> 
        body {
        background-color: #ffe6f2; /* pastel violet trÃ¨s doux */
      }
      #liste-sardanes { list-style: none; 
                       padding: 0; 
                      } 
                .event-card { 
                  background: #f7f7f7; 
                  border-radius: 8px; 
                  padding: 12px 16px; 
                  margin-bottom: 12px; 
                  box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
                  font-family: sans-serif; 
                      } 
                .event-date { 
                  font-size: 1.1em; 
                  font-weight: bold; 
                  margin-bottom: 4px; 
                } 
                .event-lieu { 
                  margin-bottom: 4px;
                } 
                .event-salle { 
                  font-size: 1.1em; 
                  font-weight: bold; 
                  margin-bottom: 4px; 
                } 
              .event-type { 
                display: inline-block; 
                background: #e0e0e0; 
                padding: 2px 8px; 
                border-radius: 6px; 
                font-size: 0.85em; 
                margin-top: 6px; } 
    </style>
  </head> 
  
        <body> 
         <h1 style="text-align: center;"> Bienvenue sur le Calendrier des Sardanes du 66 </h1>
          
                      <img src="blason.jpg" alt="photo" style="display:block; margin:0 auto;">
                      <div style="display:flex; gap:20px; margin-bottom:20px;"> 
                      <img src="sardana.JPG" alt="Image 2" style="height:120px; border-radius:8px;"> 
                    </div>
          <h2>Prochains Ã©vÃ©nements</h2> 
          <ul id="liste-sardanes"></ul>
              <script> 
              console.log("VERSION 2 DU SCRIPT");
              function formatDateFR(dateStr) { const date = new Date(dateStr); return date.toLocaleDateString("fr-FR", { day: "numeric", month: "long", year: "numeric" }); }
              fetch("./events.json?nocache=" + Date.now()) 
              .then(response => response.json()) 
              .then(data => { 
                const liste = document.getElementById("liste-sardanes"); 
                data.sort((a, b) => new Date(a.date) - new Date(b.date)); 
                data.forEach(event => { 
                const item = document.createElement("li"); 
                item.className = "event-card"; 
                item.innerHTML = ` 
                        <div class="event-date">ğŸ“… date :${event.date} â€” ${event.heure}</div> 
                        <div class="event-lieu">ğŸ“ lieu :<strong>${event.lieu}</strong></div>
                        <div class="event-salle">ğŸ›ï¸ salle :${event.salle}</div>
                        <div class="event-cobla">ğŸ¼ Cobla :${event.cobla}</div> 
                        <div class="event-type">ğŸ·ï¸ type :${event.type}</div> 
                        <div class="event-tarif">ğŸ’¶ Tarif :${event.tarif}</div>
                `; 
            liste.appendChild(item);
          });
        }) 
        .catch(error => console.error("Erreur de chargement :", error));
      </script>
<footer style="margin-top:40px; padding:15px; background:#f2d9e6; border-radius:8px; text-align:center; font-family:sans-serif; color:#333;"> 
  ğŸ“¬ Pour me contacter : 
  <a href="mailto:cuscullets@sfr.fr" style="font-size:1.4em; font-weight:bold; color:#333;"> cuscullets@sfr.fr </a> 
  <div style="margin-top:15px; font-size:0.95em;"> 
    ğŸ‘€ Nombre de sisites aujourdâ€™hui : <span id="visits-today"></span><br> ğŸ“ˆ Visites totales : <span id="visits-total"></span> </div> 
  <script> // Identifiants uniques pour ton site 
    const TOTAL_KEY = "calendrier-sardanes-66-total"; 
    const DAILY_KEY = "calendrier-sardanes-66-daily-" + new Date().toISOString().slice(0,10); 
    // Compteur total 
    fetch(`https://api.countapi.xyz/hit/${TOTAL_KEY}/visites`) 
      .then(r => r.json()) 
      .then(d => { document.getElementById('visits-total').innerText = d.value; }); 
    // Compteur du jour (clÃ© diffÃ©rente chaque jour) 
    fetch(`https://api.countapi.xyz/hit/${DAILY_KEY}/visites`) 
      .then(r => r.json()) 
      .then(d => { document.getElementById('visits-today').innerText = d.value; });
  </script> 
</footer>
          <div class="event-cobla">
            ğŸ¼ Cobla : <a href="${event.url}" target="_blank" style="font-weight:bold;"> 
              ${event.cobla} 
            </a> 
          </div>
  </body> 
</html>
